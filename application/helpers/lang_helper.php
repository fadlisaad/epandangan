<?php
/*
*  Title: Language Helper
*  Version: 1.0
*  Author: Fadli Saad
*  Website: https://fadli.my
*/

class Lang_helper extends Model {
	
	function createLanguageFile($lang)
	{
		$filename = ROOT_DIR.'languages/'.$lang.'.json';

		try{

			$stm  = "SELECT slug, content FROM languages WHERE language = :lang";
			$bind = array('lang' => $lang);
			$result = $this->pdo->fetchAssoc($stm, $bind);

			$cleanResult = "{";

			foreach ($result as $value) {
				$cleanResult .= '"'.$value['slug'].'":"'.$value['content'].'"';
				if (next($result)==true) $cleanResult .= ",";
			}

			$cleanResult .= "}";

			//Save the JSON string to a text file.
			file_put_contents($filename, $cleanResult);

		}
		catch(Exception $e){
			return $e->getMessage();
		}
	}
	
}